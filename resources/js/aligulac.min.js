var aligulacAutocompleteTemplates,getResults;aligulacAutocompleteTemplates=function(e){var t,n,r;if(null==e.tag&&null==e.name&&null==e.fullname)return"<span class='autocomplete-header'>"+autocomp_strings[e.label]+"</span>";switch(e.type){case"player":return e.key=e.tag+" "+e.id,t=null!=e.country?"<img src='"+(flags_dir+e.country.toLowerCase())+".png' />":"",r="<img src='"+(races_dir+e.race.toUpperCase())+".png' />",n=e.tag,"<a>"+t+r+n+"</a>";case"team":return e.key=e.name,"<a>"+e.name+"</a>";case"event":return e.key=e.fullname,"<a>"+e.fullname+"</a>"}return"<a>"+e.value+"</a>"},getResults=function(e,t){var n,r;return null==t?t=["players","teams","events"]:"string"==typeof t&&(t=[t]),n=$.Deferred(),r="/search/json/",$.ajax({type:"GET",url:r,dataType:"json",data:{q:e,search_for:t.join(",")}}).success(function(e){return n.resolve(e)}),n},$(document).ready(function(){return $("#search_box").autocomplete({source:function(e,t){return $.when(getResults(e.term)).then(function(e){var n,r,a,o;return a=function(e,t,n){var r,a,o;if(null==e||0===e.length)return[];for(a=0,o=e.length;o>a;a++)r=e[a],r.type=t;return[{label:n}].concat(e)},r=a(e.players,"player","Players"),o=a(e.teams,"team","Teams"),n=a(e.event,"event","Events"),t(r.concat(o.concat(n)))})},minLength:2,select:function(e,t){return $("#search_box").val(t.item.key),!1},open:function(){return $(".ui-menu").width("auto")}}).data("ui-autocomplete")._renderItem=function(e,t){return $("<li></li>").append(aligulacAutocompleteTemplates(t)).appendTo(e)}}),$(document).ready(function(){var e;return e=$("#id_players"),e.tagsInput({autocomplete_opt:{minLength:2,select:function(t,n){return e.addTag(n.item.key),$("#id_players_tag").focus(),!1},open:function(){return $(".ui-menu").width("auto")}},autocomplete_url:function(e,t){return $.when(getResults(e.term,"players")).then(function(e){var n,r,a,o;if(null!=e.players){for(o=e.players,r=0,a=o.length;a>r;r++)n=o[r],n.type="player";return t(e.players)}})},defaultText:"add a player",delimiter:"\n",formatAutocomplete:aligulacAutocompleteTemplates}),$("#id_players_addTag").keydown(function(e){return 13===e.which&&""===$("#id_players_tag").val()?$(this).closest("form").submit():void 0})});var toggle_block;toggle_block=function(e){return $("#lm-"+e).toggle(),$("#lma-"+e).html($("#lma-"+e).html()===autocomp_strings.hide?autocomp_strings.show:autocomp_strings.hide)};var gen_short;gen_short=function(e){return $.get("/m/new/?url="+encodeURIComponent(e),function(e){return $("#genshort").hide(),$("#dispshort").html('<a href="/m/'+e+'/">/m/'+e+"</a>"),$("#dispshort").show()})};var mobile_regex,toggle_navbar_method;mobile_regex=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i,(toggle_navbar_method=function(){return mobile_regex.test(navigator.userAgent)||$(window).width()<=768?$(".navbar .dropdown").off("mouseover").off("mouseout"):$(".navbar .dropdown").on("mouseover",function(){return $(".dropdown-toggle",this).trigger("click")}).on("mouseout",function(){return $(".dropdown-toggle",this).trigger("click").blur()})})();